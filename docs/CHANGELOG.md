# Changelog

## [2025-10-29] 챗봇 UI/UX 대폭 개선

### ✨ 새로운 기능 추가

#### 1. 🌙 다크모드/라이트모드 전환
- **테마 토글 버튼**: 우측 상단에 테마 전환 버튼 추가
- **CSS 변수 시스템**: `:root`와 `.dark-mode` 클래스로 12개 색상 변수 관리
- **LocalStorage 지속성**: 선택한 테마가 브라우저에 저장되어 재방문 시에도 유지
- **부드러운 전환**: 모든 색상 전환에 0.3초 transition 효과 적용
- **색상 최적화**:
  - 라이트 모드: 보라색 그라데이션 배경, 밝은 UI
  - 다크 모드: 어두운 네이비 배경, 대비 강화

#### 2. 🎬 아바타 애니메이션
- **생각하는 애니메이션**: 봇이 응답 생성 시 좌우로 흔들리는 `thinking` 애니메이션
- **말하는 애니메이션**: 봇 메시지 표시 시 바운스 효과
- **페이드인 효과**: 아바타 이미지 전환 시 부드러운 페이드인
- **호버 효과**: 마우스 올릴 때 살짝 튀어오르는 bounce 애니메이션
- **CSS 키프레임**: `talking`, `thinking`, `fadeIn`, `bounce` 4가지 애니메이션 추가

#### 3. 🎨 아바타 타입 선택 기능
- **듀얼 아바타 모드**: 이모지 스타일 ↔ 이미지 스타일 전환 가능
- **토글 버튼**: 세련된 라운드 버튼으로 타입 선택
- **로컬 이미지 통합**: `avatar/mark_free_ko/` 폴더의 강아지 표정 이미지 5종 사용
  - `neutral.png` - 중립 표정
  - `joy.png` - 기쁨 표정
  - `sad.png` - 슬픔 표정
  - `anxious.png` - 불안 표정
  - `angry.png` - 화난 표정
- **Fallback 처리**: 이미지 로드 실패 시 자동으로 이모지로 전환

#### 4. 💬 메시지 애니메이션
- **슬라이드인 효과**: 
  - 사용자 메시지: 오른쪽에서 슬라이드 인 (`slideInRight`)
  - 봇 메시지: 왼쪽에서 슬라이드 인 (`slideInLeft`)
- **자연스러운 등장**: 0.3초 ease-out 애니메이션

### 🐛 버그 수정

#### 1. 채팅 블로킹 문제 해결
- **증상**: 채팅을 치다보면 더 이상 메시지가 전송되지 않는 현상
- **원인**: `isTyping` 플래그가 에러 발생 시 `true`로 고정됨
- **해결**: 
  - `sendMessage()` 함수에 `try-catch-finally` 블록 추가
  - `finally` 블록에서 `isTyping = false` 보장
  - 에러 발생 시에도 사용자에게 알림 메시지 표시

#### 2. 메시지 입력창 잘림 현상 수정
- **증상**: 메시지 입력 영역이 화면 아래로 잘려서 보이지 않음
- **원인**: 
  - `.chat-area`의 padding-bottom 부족
  - flex 컨테이너의 높이 계산 오류
- **해결**:
  - `.chat-area`에 `padding-bottom: 30px` 추가
  - `.input-area`에 `flex-shrink: 0` 추가
  - `.messages-section`에 `min-height: 0` 추가
  - 반응형 디자인 개선 (모바일 대응)

### 🔧 기술적 개선

#### 코드 품질
- **Async/Await 패턴**: `sendMessage()` 함수를 async로 전환하여 비동기 처리 개선
- **에러 핸들링**: 모든 주요 함수에 try-catch 블록 추가
- **콘솔 로깅**: 디버깅을 위한 상세한 로그 메시지 추가
- **주석 개선**: 각 기능별로 명확한 주석 작성

#### UI/UX 최적화
- **CSS 변수 활용**: 테마별 색상을 변수로 관리하여 유지보수성 향상
- **Transition 일관성**: 모든 인터랙션에 0.3초 전환 효과 적용
- **반응형 디자인**: 모바일 화면에서도 올바르게 동작하도록 미디어 쿼리 개선
- **애니메이션 성능**: CSS 애니메이션 사용으로 GPU 가속 활용

#### API 통합 개선
- **API 엔드포인트 업데이트**: `/api/v1/health`로 헬스체크 경로 변경
- **로컬 자산 우선**: API 호출 대신 로컬 이미지 사용으로 로딩 속도 개선
- **Graceful Degradation**: API 실패 시에도 기본 이모지로 동작 보장

### 📱 반응형 디자인
- **모바일 레이아웃**: 768px 이하에서 세로 레이아웃으로 전환
- **터치 친화적**: 버튼 크기 및 간격 최적화
- **스크롤 개선**: 메시지 영역의 스크롤 동작 개선

### 🎯 사용자 경험 개선
- **감정 변경 알림**: 💭 이모티콘과 함께 감정 상태 변경 안내
- **시각적 피드백**: 모든 버튼에 호버 효과 및 active 상태 표시
- **로딩 상태**: 아바타 로딩 중 ⏳ 이모티콘 표시
- **에러 처리**: 사용자 친화적인 에러 메시지

### 📁 파일 변경 사항
- **수정**: `simple_chat_demo.html` (1244 lines)
  - +약 400 lines (CSS 변수, 애니메이션, 테마 시스템)
  - 모든 기능이 단일 HTML 파일에 통합
  
### 🚀 성능 개선
- **로컬 자산 사용**: API 호출 감소로 초기 로딩 속도 향상
- **CSS 애니메이션**: JavaScript 대신 CSS로 부드러운 애니메이션 구현
- **최적화된 이미지**: 로컬 PNG 파일 사용으로 네트워크 의존성 제거

### 📝 향후 개발 방향
현재 구현되지 않았지만 추천된 기능들:
- 💾 대화 내용 저장 및 내보내기
- 📊 감정 통계 시각화
- 🔊 음성 입력/출력
- 🎵 배경 음악 및 환경음
- 🔔 GPT API 연동 고도화
- 🌍 다국어 지원
- ⚡ 빠른 응답 제안
- 📅 감정 일기 기능
- 👥 사용자 프로필 관리
- 🎨 커스텀 테마 제작
- 🔐 보안 및 개인정보 강화
- ♿ 접근성 개선

---

**개발자**: AI Assistant with GitHub Copilot  
**날짜**: 2025년 10월 29일  
**버전**: 2.0.0  
**주요 업데이트**: UI/UX 대폭 개선, 다크모드 추가, 아바타 시스템 강화
